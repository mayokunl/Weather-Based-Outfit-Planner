{% extends "layout.html" %}
{% block content %}
<div class="container-card container-wide mt-xl mb-3xl">
  <h1 class="heading-1">Trip Details üìù</h1>

  <div class="container-section">
    <form method="post" class="p-lg">

      <!-- Trip Dates Section -->
      <div class="form-group">
        <label for="start_date" class="form-label">Start Date</label>
        <input name="start_date" type="date" class="form-control" required>
      </div>

      <div class="form-group">
        <label for="end_date" class="form-label">End Date</label>
        <input name="end_date" type="date" class="form-control" required>
      </div>

      <!-- Activities Section -->
      <div class="mt-xl">
        <h2 class="heading-2">Activities & Interests</h2>
        <p class="text-muted mb-md">
          Add activities you're planning to do during your trip to get personalized outfit recommendations.
        </p>

        <div class="form-group d-flex align-items-end">
          <div class="flex-grow-1 me-2">
            <label for="activity-input" class="form-label">Enter an activity</label>
            <input type="text" id="activity-input" class="form-control" placeholder="e.g. Hiking, Swimming, Sightseeing">
          </div>
          <button type="button" id="add-btn" class="btn btn-small">Add</button>
        </div>

        <!-- Activities display -->
        <div id="activities-display" class="mt-md">
          <p id="no-activities" class="text-muted text-center">
            No activities added yet
          </p>
          <ul id="activity-list" class="mt-sm mb-sm"></ul>
          <div id="hidden-inputs"></div>
        </div>
      </div>

      <div class="text-center mt-xl">
        <button type="submit" class="btn btn-primary btn-large">Continue to Recommendations ‚Üí</button>
      </div>

    </form>
  </div>

  <div class="button-group mt-xl">
    <a class="btn btn-secondary" href="{{ url_for('main.home') }}">üè† Back to Home</a>
  </div>
</div>

<script>
// Activity handling script
document.getElementById('add-btn').addEventListener('click', function () {
  const input = document.getElementById('activity-input');
  const activity = input.value.trim();

  if (activity) {
    const list = document.getElementById('activity-list');
    const hiddenInputs = document.getElementById('hidden-inputs');
    const noActivitiesMsg = document.getElementById('no-activities');

    if (noActivitiesMsg) noActivitiesMsg.style.display = 'none';

    const li = document.createElement('li');
    li.textContent = activity;
    list.appendChild(li);

    const hiddenInput = document.createElement('input');
    hiddenInput.type = 'hidden';
    hiddenInput.name = 'activities';
    hiddenInput.value = activity;
    hiddenInputs.appendChild(hiddenInput);

    input.value = '';
    input.focus();
  }
});

document.getElementById('activity-input').addEventListener('keypress', function (e) {
  if (e.key === 'Enter') {
    e.preventDefault();
    document.getElementById('add-btn').click();
  }
});
</script>
{% endblock %}
